!function(){"use strict";function h(){return((t=new Date).getHours()<10?"0"+t.getHours()+":":t.getHours()+":")+(t.getMinutes()<10?"0"+t.getMinutes()+":":t.getMinutes()+":")+(t.getSeconds()<10?"0"+t.getSeconds()+".":t.getSeconds()+".")+(t.getMilliseconds()<10?"00"+t.getMilliseconds():t.getMilliseconds()<100?"0"+t.getMilliseconds():""+t.getMilliseconds());var t}function t(t){this.value=e[t.level||"off"]}var e={trace:0,debug:1,info:2,warn:3,error:4,fatal:5,off:99},o={trace:"background-color:#cccccc",debug:"",info:"color:#ffffff;background-color:#00BFFF",warn:"color:#ffffff;background-color:#FFA500",error:"color:#ffffff;background-color:#FF0000",fatal:"color:#ffffff;background-color:#9370DB",off:""};function u(t){this.message=t,this.name="InvalidArgumentError"}function c(t,i){this.message=t,this.status=i,this.name="ResponseStatusError"}function a(t){this.message=t,this.name="ResponseHeaderError"}function f(t,i){this.message=t,this.externalError=i,this.name="ExternalError"}t.prototype.trace=function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];this.i("trace",t)},t.prototype.debug=function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];this.i("debug",t)},t.prototype.info=function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];this.i("info",t)},t.prototype.warn=function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];this.i("warn",t)},t.prototype.error=function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];this.i("error",t)},t.prototype.fatal=function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];this.i("fatal",t)},t.prototype.i=function(t,i){var n,s,r;this.value>e[t]||((n=i[0])&&n.constructor&&(i[0]=n.constructor.name,(s=n.h||n.o&&n.o.h)&&i.unshift(s),(r=n.f||n.o&&n.o.f)&&i.unshift(r.split("-")[1])),("debug"===t?console.debug:console.info).apply(console,[h()+" %c["+t+"]",o[t]].concat(i)))},new t({level:"info"}),u.prototype.toString=function(){return this.name+": "+this.message},c.prototype.toString=function(){return this.name+": "+this.message},a.prototype.toString=function(){return this.name+": "+this.message},f.prototype.toString=function(){return this.name+": "+this.message+". "+JSON.stringify(this.externalError)};function v(t,i,n){this.c=t,this.a=i,this.l=n,this.type="browser"}var l=[["edge",/Edge\/([0-9._]+)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9.]+)(?:\s|$)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["safari",/Version\/([0-9\._]+).*Safari/]];var n=function(t){var s,r,i=(r=null,(s=t)&&l.some(function(t){var i=t[0],n=t[1].exec(s);return!!n&&(r=[i,n],!0)}),r);if(!i)return null;var n=i[0],h=i[1],e=h[1]&&h[1].split(/[._]/).slice(0,3);e?e.length<3&&(e=e.concat(function(t){for(var i=[],n=0;n<t;n++)i.push("0");return i}(3-e.length))):e=[];var o=e.join(".");return new v(n,o,e)}(navigator.userAgent);function w(t,i){this.d(t,i)}var d={a:"1.4.4",w:n,y:"https:"===location.protocol,m:location.protocol,g:navigator.userAgent,_:"undefined"!=typeof window&&"undefined"!=typeof document&&"undefined"!=typeof navigator,O:function(){try{return"function"==typeof fetch&&"function"==typeof Response&&Response.prototype.hasOwnProperty("body")&&"function"==typeof ReadableStream&&ReadableStream.prototype.hasOwnProperty("getReader")}catch(t){return!1}}(),x:function(){try{var t=new XMLHttpRequest;t.open("GET","https://example.com",!0);var i="arraybuffer";return t.responseType=i,t.responseType===i&&"function"==typeof t.setRequestHeader&&"function"==typeof t.getResponseHeader&&"function"==typeof t.getAllResponseHeaders}catch(t){return!1}}(),M:function(){if(n&&"firefox"===n.c&&Number(n.l[0])<68)try{var t=new XMLHttpRequest;t.open("GET","https://example.com",!0);var i="moz-chunked-arraybuffer";return t.responseType=i,t.responseType===i}catch(t){return!1}return!1}(),R:function(){try{return"function"==typeof Uint8Array&&"function"==typeof Uint8Array.prototype.set&&"function"==typeof Uint8Array.prototype.subarray}catch(t){return!1}}(),k:function(){try{return"function"==typeof AbortController&&"function"==typeof AbortSignal&&"function"==typeof Request&&Request.prototype.hasOwnProperty("signal")}catch(t){return!1}}(),S:function(){try{return"function"==typeof Promise&&"function"==typeof Promise.resolve}catch(t){return!1}}()},i="open1xyajs-data.xycdn.com";function y(){this.D=[],this.N=0,this.T=0}function p(t,i){void 0===i&&(i=1e3),this.A={},this.F=t,this.j=i}function b(t){this.X=0,this.U=0,this.q=0,this.J=0,this.H=0,this.P=t}function s(){this.L={}}w.prototype.d=function(t,i){if(i<0)throw new RangeError("length should not be negative.");this.N=t,this.C=i,this.T=t+i},w.prototype.z=function(t){return t>=this.N&&t<this.T},w.prototype.G=function(t){return t.N>=this.N&&t.T<=this.T},w.prototype.I=function(t){return!(t.N>this.T||t.T<=this.N)},w.prototype.B=function(){return 0===this.N&&this.C===w.MAX_LENGTH},w.prototype.V=function(t){return this.N===t.N&&this.C===t.C},w.prototype.Y=function(){return"bytes="+this.N+"-"+(isFinite(this.C)?this.T-1:"")},w.prototype.toString=function(){return"["+this.N+","+this.C+","+this.T+")"},w.prototype.valueOf=function(){return{start:this.N,end:this.T}},w.prototype.$=function(){return new w(this.N,this.C)},w.prototype.W=function(t){return!(t.T<this.N||this.T<t.N)},w.prototype.K=function(t){if(t.T<this.N||this.T<t.N)return null;var i=Math.min(this.N,t.N);return new w(i,Math.max(this.T,t.T)-i)},w.prototype.Q=function(t){if(t.T<=this.N||this.T<=t.N)return null;var i=this.N<t.N?t.N:this.N;return new w(i,(this.T>t.T?t.T:this.T)-i)},w.MAX_LENGTH=0xffffffffffff,y.prototype.Z=function(){for(var t=0,i=this.D.length;i--;)t+=this.D[i].C;return t},y.prototype.z=function(t){for(var i=!1,n=0,s=this.D.length;n<s;n++)if(this.D[n].z(t)){i=!0;break}return i},y.prototype.tt=function(t){for(var i=null,n=0,s=this.D.length;n<s;n++){var r=this.D[n];if(r.z(t)){i=r;break}}return i},y.prototype.nt=function(t){for(var i=this.D.length,n=0;n<i;n++)if(this.D[n].z(t)||this.D[n].T===t)return n;return-1},y.prototype.rt=function(t){var i=new y,n=t.N,s=t.T;if(0===t.C||n>=this.T||s<=this.N)return i;for(var r=0,h=0,e=0,o=this.D.length;e<o;e++){var u=this.D[e];if(n<u.N)r=u.N;else{if(!(n<u.T))continue;r=n}h=e;break}for(var f=0,c=0,a=this.D.length-1;0<=a;a--){var v=this.D[a];if(s>v.T)f=v.T;else{if(!(s>v.N))continue;f=s}c=a;break}if(h===c)return i.ht(new w(r,f-r)),i;for(var l=h,d=c+1;l<d;l++){var p=this.D[l];l===h?i.ht(new w(r,p.T-r)):l===c?i.ht(new w(p.N,f-p.N)):i.ht(p)}return i},y.prototype.G=function(t){if(0===this.D.length)return!1;for(var i=0,n=this.D.length;i<n;i++)if(this.D[i].G(t))return!0;return!1},y.prototype.ht=function(t){var i=this.D.length;if(0===i||this.T<t.N)this.D.push(t.$());else if(this.N>t.T)this.D.unshift(t.$());else{for(var n=0,s=i-1;0<=s;s--)if(this.D[s].T<t.N){n=s+1;break}for(var r=i-1,h=0;h<i;h++)if(this.D[h].N>t.T){r=h-1;break}var e=this.D[n],o=this.D[r],u=t.$();t.N>=e.N&&t.N<=e.T&&(u=u.K(e)),t.T>=o.N&&t.T<=o.T&&(u=u.K(o)),this.D.splice(n,r-n+1,u)}this.ot()},y.prototype.ut=function(t){var i,n=this.D.length;if(!(0===n||this.T<=t.N||this.N>=t.T)){for(var s=0,r=n-1;0<=r;r--)if(this.D[r].T<=t.N){s=r+1;break}for(var h=n-1,e=0;e<n;e++)if(this.D[e].N>=t.T){h=e-1;break}var o=this.D[s],u=this.D[h],f=[];t.N>o.N&&t.N<o.T&&f.push(new w(o.N,t.N-o.N)),t.T>u.N&&t.T<u.T&&f.push(new w(t.T,u.T-t.T)),(i=this.D).splice.apply(i,[s,h-s+1].concat(f)),this.ot()}},y.prototype.$=function(){for(var t=this.D,i=t.length,n=new y,s=0;s<i;s++)n.ht(t[s].$());return n},y.prototype.V=function(t){if(this.D.length!==t.D.length)return!1;for(var i=0,n=this.D.length;i<n;i++)if(!this.D[i].V(t.D[i]))return!1;return!0},y.prototype.ct=function(){this.D=[],this.N=0,this.T=0},y.prototype.toString=function(){return"{"+this.D.join(",")+"}"},y.prototype.valueOf=function(){for(var t=[],i=0;i<this.D.length;i++)t.push(this.D[i].valueOf());return t},y.prototype.ot=function(){0!==this.D.length&&(this.N=this.D[0].N,this.T=this.D[this.D.length-1].T)},y.prototype.at=function(t,i){void 0===t&&(t=0);for(var n,s=new y,r=t+(i=i||this.T-this.N),h=t,e=this.D,o=0;o<e.length&&!(r<h);o++)e[o].N>h&&(n=e[o].N,s.ht(new w(h,(n<r?n:r)-h))),e[o].T>h&&(h=e[o].T);return h<i&&s.ht(new w(h,i-h)),s},p.prototype.vt=function(t){var i=Math.floor(Date.now()/this.j);this.dt(i),this.A[i]+=t},p.prototype.yt=function(){var i=this,n=Math.floor(Date.now()/this.j);this.dt(n);var s=0,r=0;return Object.keys(this.A).forEach(function(t){Number(t)!==n&&(s+=i.A[t],r++)}),0===r?0:s/r*(1e3/this.j)},p.prototype.dt=function(i){var n=this;Object.keys(this.A).forEach(function(t){Number(t)+n.F<=i&&delete n.A[t]});for(var t=i;t>i-this.F;t--)void 0===this.A[t]&&(this.A[t]=0)},b.prototype.bt=function(t){var i=this.P.gt;if(0===i||1===i||2===i)return t._t;if(3===i||4===i)return t.Ot;switch(this.H){case 104:case 109:return t.xt;case 7:case 8:case 9:case 101:case 105:case 106:case 112:case 6:return t.Mt;default:return t.Rt}},b.prototype.kt=function(){var t=Math.round(this.q-this.X);return this.X=this.q,t},b.prototype.St=function(){var t=Math.round(this.J-this.U);return this.U=this.J,t},b.prototype.Dt=function(t){this.Nt=Date.now(),this.Et=void 0,this.Tt=t,this.At=void 0,this.Ft=void 0,this.H=0},b.prototype.jt=function(t,i){var n=Date.now();this.At=t,this.Ft=i,this.Nt&&(this.J+=n-this.Nt),this.Et=n},b.prototype.Xt=function(){var t=Date.now();this.Et&&(this.J+=t-this.Et),this.Et=t},b.prototype.Ut=function(t){this.q+=t.length},b.prototype.qt=function(t){this.Jt=t},s.prototype.set=function(t,i){this.L[t]=i},s.prototype.get=function(t){return this.L[t]},s.prototype.has=function(t){return t in this.L},s.prototype.remove=function(t){delete this.L[t]},s.prototype.clear=function(){for(var t=Object.keys(this.L),i=t.length;i--;)this.remove(t[i])},s.prototype.forEach=function(t){for(var i=Object.keys(this.L),n=0,s=i.length;n<s;n++){var r=i[n];t(this.L[r],r)}},s.prototype.size=function(){return Object.keys(this.L).length};var m=function(t){function i(){t.apply(this,arguments)}return t&&(i.__proto__=t),((i.prototype=Object.create(t&&t.prototype)).constructor=i).prototype.Ht=function(){var i=[];return this.forEach(function(t){0===t.gt&&i.push(t)}),i},i.prototype.Pt=function(){var i=[];return this.forEach(function(t){2===t.gt&&i.push(t)}),i},i.prototype.Lt=function(){var i=[];return this.forEach(function(t){3!==t.gt&&4!==t.gt||i.push(t)}),i},i}(s),g=function(){for(var t="",i=1;i<=32;i++)t+=Math.floor(16*Math.random()).toString(16),8!==i&&12!==i&&16!==i&&20!==i||(t+="-");return t};function O(t){return"number"==typeof t}function _(t,i){void 0===i&&(i=0);var n=Math.pow(10,i);return Math.round(t*n)/n}var x=/; */,M={parse:function(t){for(var i={},n=t.split(x),s=decodeURIComponent,r=0;r<n.length;r++){var h,e,o=n[r],u=o.indexOf("=");u<0||(h=o.substr(0,u).trim(),'"'===(e=o.substr(++u,o.length).trim())[0]&&(e=e.slice(1,-1)),void 0===i[h]&&(i[h]=function(i,t){try{return t(i)}catch(t){return i}}(e,s)))}return i}};function R(t){var i;this.Ct=new p(5,200),this.zt=0,this.Gt=0,this.It=0,this.Bt=new w(0,0),this.Vt=new y,this.Yt=new m,this.$t={},this.Wt=1/0,this.Kt=0,this.Qt=0,this.Zt=0,this.ti=0,this.ii=0,this.ni=0,this.ri=0,this.hi=0,this.ei=0,this.oi=!1,this.fi=15,this.ci=10,this.ai=5,this.vi=2e3,this.li=2400,this.di=1e4,this.wi=12e3,this.yi=2e3,this.bi=8388608,this.mi=3,this.gi=4e3,this._i=8388608,this.Oi=2097152,this.xi=2,this.Mi=1048576,this.Ri=10,this.ki=8e3,this.Si=3,this.Di=1,this.Ni=[128,256,384,512,768,1024,1536,2048,3072,4096,5120,6144,7168,8192],this.Ei={edge:15,chrome:65,firefox:64,safari:11},this.Ti=t.media||t.video||t.audio,this.Ai=!!t.withCredentials,this.h=t.mediaType,this.Fi=(i=t.url,decodeURI(i)===i?encodeURI(i):i),this.ji=this.Fi,this.Xi=this.Fi.split("?")[0],this.Ui=function(t){var i=t.split("?");if(!(i.length<1)){var n=i.shift().split("/");if(!(n.length<4)){var s=n.pop().split(".");if(!(s.length<2))return s.pop()}}}(this.Fi);var n="m4s"===this.Ui?"hd":"hf",s=d.a.split("-")[0];this.qi=n+"_"+s,this.Ji="xyvp_cfg_"+n;var r=M.parse(document.cookie);this._uuid=r._uuid,this.f=g(),window.player&&window.player.getSession&&(this.Hi=window.player.getSession()),this.Pi(),this.Li()}function k(t,i,n){void 0===n&&(n=!1),this.Ci=0,this.zi=!1,this.Gi=0,this.Ii=t,this.Bi=i,this.zi=n}function r(t){var n=this;this.Vi=0,this.Yi=0,this.$i=0,this.Wi=0,this.Ki=0,this.Qi=0,this.Zi=0,this.tn=[],this.in=[],this.nn={},this.sn={},this.rn=0,this.hn=!1,this.en=0,this.un=Date.now(),this.fn=!0,this.o=t,this.o.qt=function(t,i){n.an.cn()&&n.vn(i)},this.an=k.zi(50,this.ln.bind(this))}R.prototype.Pi=function(){this.dn={cr0:0,cr201:0,cr202:0,cr203:0,cr204:0,cr6:0,cr7:0,cr8:0,cr9:0,cr100:0,cr101:0,cr104:0,cr105:0,cr106:0,cr108:0,cr109:0}},R.prototype.wn=function(t){localStorage.setItem(this.Ji,JSON.stringify(t))},R.prototype.Li=function(){localStorage.removeItem(this.Ji+"_1.3");var t,i=localStorage.getItem(this.Ji);if(i){try{t=JSON.parse(i)}catch(t){return}this.yn(t)}},R.prototype.yn=function(t){var i,n,s,r,h,e,o,u,f,c,a,v,l,d,p,w,y,b,m,g,_;t&&(i=t.bufferLimit,n=t.bufferFallback,s=t.bufferLow,r=t.requestTimeout,h=t.receiveTimeout,e=t.cdnRequestTimeout,o=t.cdnReceiveTimeout,u=t.preflightTimeout,f=t.suspendRangeLength,c=t.preflightLimit,a=t.bufferDecreasing,v=t.cacheSize,l=t.requestLimit,d=t.requestNum,p=t.sliceSize,w=t.interruptLimit,y=t.interruptTimeout,b=t.repeatCallLimit,m=t.fragmentSizeList,g=t.browserLimit,_=t.detectionFirst,O(i)&&3<i&&(this.fi=i),O(n)&&2<n&&(this.ci=n),O(s)&&1<s&&(this.ai=s),O(r)&&500<r&&(this.vi=r),O(h)&&500<h&&(this.li=h),O(e)&&2e3<e&&(this.di=e),O(o)&&2e3<o&&(this.wi=o),O(u)&&500<u&&(this.yi=u),O(f)&&1024<f&&(this.bi=f),O(c)&&2<c&&(this.mi=c),O(a)&&1e3<a&&(this.gi=a),O(v)&&4194304<v&&(this._i=v),O(d)&&2<d&&(this.xi=d),O(p)&&1048576<p&&(this.Mi=p),O(l)&&524288<l&&l<this._i-this.xi*this.Mi&&(this.Oi=l),O(w)&&2<w&&(this.Ri=w),O(y)&&2e3<y&&(this.ki=y),O(b)&&1<b&&(this.Si=b),O(_)&&(this.Di=_),"[object Array]"===Object.prototype.toString.call(m)&&(this.Ni=m),"object"==typeof g&&null!==g&&(this.Ei=g))},R.prototype.bn=function(t,i,n){i<1&&(i=1/0),n<t+i&&(i=n-t),n!==this.Wt&&isFinite(n)&&(this.Wt=n),this.Bt.d(t,i)},R.prototype.mn=function(){return _(this.Ti.duration,6)},R.prototype.gn=function(){var t=window.dashPlayer||window.player;if(t&&"function"==typeof t.getBufferLength&&("video"===this.h||"audio"===this.h))return t.getBufferLength(this.h)||0;var i=this.Ti.buffered,n=this.Ti.currentTime||.2;try{for(var s=0,r=i.length;s<r;s++)if(n>=i.start(s)&&n<i.end(s))return _(i.end(s)-n,6)}catch(t){}return 0},R.prototype._n=function(t){for(var i=this.Ti.buffered,n=0,s=i.length;n<s;n++)if(t>=i.start(n)&&t<i.end(n))return i.end(n);return 0},R.prototype.On=function(){return _(this.Ti.currentTime,6)},R.prototype.xn=function(){return this.Mn(this.Ti.buffered)},R.prototype.Rn=function(){return this.Ti.seeking},R.prototype.kn=function(){return this.Ti.paused&&1<this.Ti.readyState},R.prototype.Sn=function(){return this.Ti.ended},R.prototype.Dn=function(){var t=this.Zt+this.ti;return 0<t?_(100*this.ti/t,2):0},R.prototype.Nn=function(t){for(var i=this.Ti.buffered,n=0;n<i.length;n++)if(t>=i.start(n)&&t<i.end(n))return!0;return!1},R.prototype.Mn=function(t){for(var i=[],n=0,s=t.length;n<s;n++){var r=_(t.start(n),6),h=_(t.end(n),6);i.push(r+"~"+h)}return i.toString()},R.prototype.En=function(t){return t.toJSON=function(){return{stack:this.stack,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,code:this.code}},t},R.prototype.Tn=function(){this.Yt.clear()},k.zi=function(t,i){return new k(t,i,!0)},k.prototype.cn=function(){return 0!==this.Ci},k.prototype.An=function(){var t=this;this.Ci=setTimeout(function(){t.Gi+=1,"function"==typeof t.Bi&&t.Bi(),0!==t.Ci&&(t.Ci=0,t.zi&&t.An())},this.Ii)},k.prototype.N=function(){this.cn()||this.An()},k.prototype.Fn=function(){clearTimeout(this.Ci),this.Ci=0};var S=d.m+"//"+i+"/o_vod_h5sdk_one",E=d.m+"//"+i+"/o_vod_h5sdk_cycle";function D(t){this.o=t,this.Ti=t.Ti,this.jn=!1,this.Xn=0,this.Un(),this.qn=new r(t)}function N(t){var i="audio"===(this.o=t).h?t._i/2:t._i,n=this.Jn=new Uint8Array(i);this.Z=n.byteLength}function T(t){var i=this;this.o=t,this.Hn=null,this.an=k.zi(1e4,this.Pn.bind(this));var n=new XMLHttpRequest;n.onerror=function(){i.Ln("network error")},n.ontimeout=function(){i.Ln("timeout 8000")},n.onload=function(){if(200===n.status){var t={};try{t=JSON.parse(n.response)}catch(t){return void i.Ln(t.toString())}1===t.result_code?i.Cn(t.data):i.Ln("unexpect result code: "+t.result_code,t.error_message)}else i.Ln("unexpect http status: "+n.status)},this.zn=n,this.fn=!0,this.Gn=!1}r.prototype.Tn=function(){this.In(),this.an.Fn(),this.fn=!0},r.prototype.N=function(){this.fn=!1,this.an.cn()||this.an.N()},r.prototype.Fn=function(){this.In(),this.fn=!0},r.prototype.Bn=function(t){this.hn=!1,this.Zi=t;var i=this.o;i.ei+=t-Math.max(this.Qi,this.Ki);var n=h();this.sn[n]={t:i.On(),b:i.xn(),s:Math.round(i.Ct.yt()),r:i.Bt+"",n:i.Vn,p:i.Qt,wt:this.Zi-this.Qi}},r.prototype.Yn=function(t){this.hn=!0,this.Qi=t;var i=this.o;i.hi+=1;var n=h();this.nn[n]={t:i.On(),b:i.xn(),s:Math.round(i.Ct.yt()),r:i.Bt+"",n:i.Vn,p:i.Qt}},r.prototype.vn=function(t){var i=this.$n(),n=this.o,s={act:"err",bf:n.xn(),bl:n.gn(),e:t.error,et:t.type,cr:t.reason,ee:t.extra,pn:t.target};this.Wn(S,this.Kn(i,s))},r.prototype.Qn=function(){var t=this.o,i=this.$n(),n={act:"fb",bf:t.xn(),bl:t.gn(),fb:t.Kt};this.Wn(S,this.Kn(i,n))},r.prototype.Zn=function(){var t=this.o,i=this.$n(),n={act:"db",bf:t.xn(),bl:t.gn(),st:t.ni,sp:t.ii,sc:t.ri};this.Wn(S,this.Kn(i,n))},r.prototype.ln=function(){var t=this.o,i=this.an.Gi;i%3==0&&this.ts(),i%20==0&&(this.tn.push(1e3*t.gn()),this.in.push(t.Ct.yt())),i%300==0&&this.In(),this.en=this.hn?this.en+1:0,this.en===t.ki/50&&(t.qt(this,{type:"forbidden",error:"interrupt timeout",extra:"time: "+(Date.now()-this.Qi)}),t.ns({status:4203,message:"interrupt timeout"}))},r.prototype.ts=function(){var t=this.o,i=t.On();0<i&&i===this.rn&&t.oi&&!t.kn()&&!t.Rn()&&t.gn()<4?!1===this.hn&&this.Yn(Date.now()):!0===this.hn&&this.Bn(Date.now()),this.rn=i},r.prototype.In=function(){var t,i,n,s,r,h,e,o,u,f,c,a,v,l,d,p,w,y,b,m,g,_,O,x,M,R,k,S,D,N;this.fn||(t=this.o,(i=Date.now())-this.un<1e3||(this.un=i,(n=t.Zt-this.$i)<0&&(n=0),(s=t.ti-this.Wi)<0&&(s=0),this.hn&&(t.ei+=i-Math.max(this.Qi,this.Ki)),r=t.hi-this.Yi,h=t.ei-this.Vi,this.Yi=t.hi,this.Vi=t.ei,this.$i=t.Zt,this.Wi=t.ti,this.Ki=i,r>t.Ri&&(t.qt(this,{type:"forbidden",error:"interrupt limit",extra:"count: "+r}),t.ns({status:4203,message:"interrupt limit"})),0===this.tn.length&&this.tn.push(1e3*t.gn()),e=this.ss(),o=this.rs(e),this.tn=[],0===this.in.length&&this.in.push(t.Ct.yt()),u=this.hs(),this.in=[],f=0<Object.keys(this.nn).length?JSON.stringify(this.nn):void 0,c=0<Object.keys(this.sn).length?JSON.stringify(this.sn):void 0,this.nn={},this.sn={},(t.kn()||t.Sn()||isNaN(t.mn())||!t.xn())&&n+s===0||(v=(a=t.dn).cr0,l=a.cr201,d=a.cr202,p=a.cr203,w=a.cr204,y=a.cr6,b=a.cr7,m=a.cr8,g=a.cr9,_=a.cr100,O=a.cr101,x=a.cr104,M=a.cr105,R=a.cr106,k=a.cr108,S=a.cr109,t.Pi(),D=this.$n(),N={it:h,ic:r,dc:n,db:s,pr:t.Dn(),br:t.xn(),bla:e,bld:o,bem:f,bfm:c,spa:u,du:t.mn(),cr0:v,cr201:l,cr202:d,cr203:p,cr204:w,cr6:y,cr7:b,cr8:m,cr9:g,cr100:_,cr101:O,cr104:x,cr105:M,cr106:R,cr108:k,cr109:S},this.Wn(E,this.Kn(D,N)))))},r.prototype.Wn=function(t,i){var n=new XMLHttpRequest;n.open("POST",t,!0),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.send(i)},r.prototype.$n=function(){var t=this.o,i={se:~~d._,fs:~~d.O,xa:~~d.x,mc:~~d.M,ta:~~d.R,as:~~d.k,pm:~~d.S};return{v:d.a,ua:d.g,pi:t.f,u:t.Xi,ft:t.Ui,mt:t.h,ui:t._uuid,fs:t.Wt,pt:t.On(),dip:t.es,sid:t.Hi,lt:t.zt,si:JSON.stringify(i),b:d.w?d.w.c:void 0,bv:d.w?d.w.a:void 0}},r.prototype.Kn=function(t,i){return this.os(t)+"&"+this.os(i)},r.prototype.os=function(n){var s=[];return Object.keys(n).forEach(function(t){var i=n[t];"string"!=typeof i&&"number"!=typeof i||s.push(t+"="+encodeURIComponent(i))}),s.join("&")},r.prototype.ss=function(){var t=this.tn,i=t.length;if(0===i)return 0;var n=0;return t.forEach(function(t){n+=t}),Math.floor(n/i)},r.prototype.rs=function(i){var t=this.tn,n=t.length;if(0===n)return 0;var s=0;return t.forEach(function(t){s+=Math.abs(t-i)*Math.abs(t-i)}),Math.floor(Math.sqrt(s/n))},r.prototype.hs=function(){var t=this.in,i=t.length;if(0===i)return 0;var n=0;return t.forEach(function(t){n+=t}),Math.floor(n/i)},D.prototype.Tn=function(){this.qn.Tn(),this.us()},D.prototype.cs=function(){this.qn.N()},D.prototype.vs=function(){this.qn.Fn()},D.prototype.Un=function(){var t=this.Ti;t.addEventListener("seeking",this.ls=this.ls.bind(this)),t.addEventListener("seeked",this.ds=this.ds.bind(this)),t.addEventListener("loadeddata",this.ps=this.ps.bind(this)),t.addEventListener("error",this.qt=this.qt.bind(this)),t.addEventListener("timeupdate",this.ws=this.ws.bind(this))},D.prototype.us=function(){var t=this.Ti;t.removeEventListener("seeking",this.ls),t.removeEventListener("seeked",this.ds),t.removeEventListener("loadeddata",this.ps),t.removeEventListener("error",this.qt),t.removeEventListener("timeupdate",this.ws)},D.prototype.ls=function(){var t=this.o,i=t.On();i&&!this.jn&&(this.jn=!0,this.Xn=Date.now(),t.Gt=i,t.ni=t.Nn(i)?1:2)},D.prototype.ds=function(){var t=this.o;this.jn&&(this.jn=!1,t.ii=t.Bt.N,t.ri=Date.now()-this.Xn,2===t.ni&&this.qn.Zn(),t.oi=!1)},D.prototype.ps=function(){var t=this.o;t.It&&(t.Kt=Date.now()-t.It,this.qn.Qn(),t.oi=!1)},D.prototype.qt=function(){var t=this.o,i=this.Ti;i&&i.error?t.qt(this,{type:"forbidden",error:"media error",extra:i.error.code+", "+i.error.message}):t.qt(this,{type:"forbidden",error:"media error"}),t.ns({status:4203,message:"media error"})},D.prototype.ws=function(){this.o.oi=!0},N.prototype.Tn=function(){this.o.Vt.ct()},N.prototype.ys=function(t){for(var i,n=this.o,s=this.Z,r=n.Vt,h=Math.floor(t.T/s)*s,e=new w(t.N-h,t.C),o=0;o+e.N<r.T;o+=s)o!==h&&(i=new w(e.N+o,e.C),r.ut(i));r.ht(t)},N.prototype.bs=function(t,i){this.o;var n=this.Z;if(i.C>n)return!1;if(0===t.length)return!1;if(0===i.C)return!1;var s,r=this.Jn,h=i.N%n;return h+t.length>n?(s=n-h,r.set(t.subarray(0,s),h),r.set(t.subarray(s),0)):r.set(t,h),this.ys(i),!0},N.prototype.ms=function(t){var i=this.o;if(0===t.C)return null;if(!i.Vt.G(t))return null;var n,s,r=this.Jn,h=this.Z,e=new Uint8Array(t.C),o=t.N%h;return o+t.C>h?(n=h-o,s=o+t.C-h,e.set(r.subarray(o),0),e.set(r.subarray(0,s),n)):e.set(r.subarray(o,o+t.C),0),e};var A=d.m+"//h5seeds-open.xycdn.com/api/get_seeds";function F(t){this.gs=0,this._s=0,this.o=t,this.an=k.zi(200,this.ln.bind(this))}function j(){this.Os={}}function X(t){var r={};return t&&t.trim().split(/[\r\n]+/).forEach(function(t){var i,n=t.split(":"),s=n.shift();s&&(i=n.join(":").trim(),r[s.trim().toLowerCase()]=i)}),r}function U(t,i,n){this.xs=!1,this.jt=null,this.Xt=null,this.Ut=null,this.Ms=null,this.qt=null,this.o=t,this.Fi=i,this.Tt=n}function q(t){if("string"!=typeof t)return null;var i=C.exec(t);return i?{N:Number(i[1]),T:Number(i[2]),Wt:Number(i[3])}:null}function J(t,i,n){var s=this;void 0===i&&(i=3),void 0===n&&(n=5e3),this.Rs=0,this.o=t,this.ks=i,this.Ss=n,this.an=new k(this.Ss,this.Ds.bind(this));var r=new XMLHttpRequest;r.onerror=function(){s.Ln("network error")},r.ontimeout=function(){s.Ln("timeout 8000")},r.onload=function(){if(200===r.status){var t={};try{t=JSON.parse(r.response)}catch(t){return void s.Ln(t+"")}s.Cn(t)}else s.Ln("unexpect http status: "+r.status)},this.zn=r,this.Ns=G+"?version="+t.qi}T.prototype.Tn=function(){this.Hn=null,this.fn=!0,this.Gn=!1,this.an.Fn(),this.zn.abort()},T.prototype.N=function(){this.fn=!1,this.an.cn()||(this.Pn(),this.an.N())},T.prototype.Fn=function(){this.fn=!0},T.prototype.Pn=function(){var t,i;this.fn||this.Gn||this.o.kn()||this.o.Sn()||(t={id:this.o.f,url:this.o.Fi,client_type:1,version:d.a,peer_status:this.Es()},this.Gn=!0,(i=this.zn).open("POST",A,!0),i.timeout=8e3,i.send(JSON.stringify(t)))},T.prototype.Ln=function(t,i){this.Gn=!1,this.o.qt(this,{type:"request dispatcher",error:t,extra:i})},T.prototype.Cn=function(t){this.Gn=!1;var i=[];t&&(t.peers&&t.peers.forEach(function(t){i.push({Ts:t.peer_id,Fi:t.request_url,As:1,Fs:t.node_type,js:t.remain})}),t.client_ip&&(this.o.es=t.client_ip)),this.Hn&&this.Hn(i)},T.prototype.Es=function(){var n=this.o,s=[];return n.Yt.forEach(function(t){var i={peer_id:t.Ts,traffic:t.Xs.kt(),period:t.Xs.St(),status:t.Xs.bt(T.Us),reason:t.Xs.H,buffer:n.gn()};void 0!==t.Fs&&(i.node_type=t.Fs),void 0!==t.js&&(i.remain=t.js),s.push(i),5===t.gt&&n.Yt.remove(t.Ts)}),s},T.Us={_t:1,Ot:2,xt:3,Mt:4,Rt:9},F.prototype.Tn=function(){this.an.Fn(),this.o.Yt.forEach(function(t){return t.vs()})},F.prototype.N=function(){this.an.Fn(),this.ln(),this.an.N()},F.prototype.Fn=function(){this.an.Fn(),this.o.Yt.forEach(function(t){return t.qs()})},F.prototype.Js=function(){return 0<this.o.Yt.Pt().length},F.prototype.ln=function(){this.o.Sn()||(this.Hs(),this.Ps(),this.Ls(),this.Cs())},F.prototype.Ls=function(){var t=this.o,i=t.gn(),n=this.gs;(this.gs=i)<t.ci&&i>=t.ai?(this._s=0<i-n?0:this._s+1,this._s>t.gi/200&&t.Yt.Lt().forEach(function(t){return t.qs(109)})):i<t.ai?(this._s=0,t.Yt.Lt().forEach(function(t){return t.qs(0<i?108:110)})):this._s=0},F.prototype.Hs=function(){var t=this.o,i=t.Yt.Pt().sort(function(t,i){return t.zs-i.zs}),n=i.length-t.mi+1;if(!(n<1))for(var s=0;s<n;s++){var r=i[s];t.Yt.remove(r.Ts)}},F.prototype.Ps=function(){var i=[],n=[];this.o.Yt.forEach(function(t){0===t.gt?i.push(t):1!==t.gt&&2!==t.gt||n.push(t)}),n.length>this.o.mi-1||0!==i.length&&i[0].Gs()},F.prototype.Cs=function(){var i=this;this.o.Yt.forEach(function(t){return i.Is(t)})},F.prototype.Is=function(t){var i,n,s,r,h=Date.now(),e=this.o;3===t.gt?(n=(i=t.Xs.Nt)?h-i:0,(0===t.As?e.di:e.vi)<=n&&t.vs(7)):4===t.gt&&(r=(s=t.Xs.Et)?h-s:0,(0===t.As?e.wi:e.li)<=r&&t.vs(104))},j.prototype.addListener=function(t,i){if("function"!=typeof i)throw new TypeError('The "listener" argument must be of type Function.');void 0===this.Os[t]&&(this.Os[t]=[]),this.Os[t].push(i)},j.prototype.emit=function(t){for(var i=[],n=arguments.length-1;0<n--;)i[n]=arguments[n+1];var s=this.Os[t];if(s&&0!==s.length)for(var r=0,h=s.length;r<h;r++)s[r].apply(this,i)},j.prototype.removeListener=function(t,i){if("function"!=typeof i)throw new TypeError('The "listener" argument must be of type Function.');var n=this.Os[t];n&&(n.splice(n.indexOf(i),1),0===n.length&&delete this.Os[t])},j.prototype.removeAllListeners=function(t){t?delete this.Os[t]:this.Os={}},j.prototype.on=function(t,i){this.addListener(t,i)},j.prototype.off=function(t,i){t?i?this.removeListener(t,i):this.removeAllListeners(t):this.removeAllListeners()},U.prototype.Bs=function(){this.jt=null,this.Ut=null,this.Ms=null,this.qt=null};var H=function(s){function t(t,i,n){s.call(this,t,i,n),this.Vs=null,t.zt=1}return s&&(t.__proto__=s),((t.prototype=Object.create(s&&s.prototype)).constructor=t).prototype.Ys=function(){var t,i,s=this;this.xs||((t={method:"GET",mode:"cors",redirect:"follow",referrerPolicy:"no-referrer-when-downgrade"}).headers={Range:this.Tt.Y()},this.o.Ai&&(t.credentials="include"),d.k&&(this.$s=new AbortController,(i=this.$s.signal).onabort=function(){s.Ws&&s.Ws()},t.signal=i),fetch(this.Fi,t).then(function(t){if(s.Vs=t.body&&t.body.getReader(),s.xs)s.Ks();else{var n;if(s.jt&&(n={},t.headers.forEach(function(t,i){n[i.toLowerCase()]=t}),s.jt(t.status,t.statusText,n)),!s.Vs)throw new ReferenceError("body is "+t.body+", reader is "+s.Vs);s.Qs()}}).catch(function(t){s.Ln(t)}))},t.prototype.qs=function(){var i=this;this.xs=!0,this.Bs();var t=new Promise(function(t){return i.Ws=t});return this.$s?this.$s.abort():this.Ks(),t},t.prototype.Ks=function(){var t=this;this.Vs&&this.Vs.cancel().then(function(){t.Ws&&t.Ws()}).catch(function(){})},t.prototype.Ln=function(t){this.xs||"AbortError"===t.name||this.qt&&this.qt(t)},t.prototype.Qs=function(){var i=this;this.Vs&&this.Vs.read().then(function(t){if(!i.xs){if(t.done)return i.Ms&&i.Ms(),void i.Bs();i.Xt&&i.Xt(),i.Ut&&i.Ut(t.value),i.Qs()}}).catch(function(t){i.Ln(t)})},t}(U),P=function(s){function t(t,i,n){s.call(this,t,i,n),this.zn=new XMLHttpRequest,t.zt=2}return s&&(t.__proto__=s),((t.prototype=Object.create(s&&s.prototype)).constructor=t).prototype.Ys=function(){var t,s=this;this.xs||((t=this.zn).open("GET",this.Fi,!0),t.setRequestHeader("Range",this.Tt.Y()),t.responseType="moz-chunked-arraybuffer",this.o.Ai&&(t.withCredentials=!0),t.onreadystatechange=function(t){var i=t.target;if(2===i.readyState&&s.jt){var n=X(i.getAllResponseHeaders());try{s.jt(i.status,i.statusText,n)}catch(t){s.qt&&s.qt(t)}}},t.onprogress=function(t){var i=t.target;s.Xt&&s.Xt(),s.Ut&&s.Ut(new Uint8Array(i.response))},t.onerror=function(){s.qt&&s.qt(new TypeError("XHR error"))},t.onload=function(){s.Ms&&s.Ms(),s.Bs()},t.send())},t.prototype.qs=function(){this.xs=!0,this.Bs();var t=this.zn;return t.onreadystatechange=null,t.onprogress=null,t.onerror=null,t.onload=null,t.abort(),Promise.resolve()},t}(U),L=function(s){function t(t,i,n){s.call(this,t,i,n),this.Zs=!1,this.Ct=new p(5,100),this.tr=0,t.zt=3,this.ir=n.N}return s&&(t.__proto__=s),((t.prototype=Object.create(s&&s.prototype)).constructor=t).prototype.Ys=function(){var t,r,i,n,s,h,e,o=this;this.xs||(t=this.ir,r=this.o,(i=this.zn=new XMLHttpRequest).open("GET",this.Fi,!0),i.responseType="arraybuffer",r.Ai&&(i.withCredentials=!0),i.onreadystatechange=function(t){var i=t.target;if(2===i.readyState&&!o.Zs){if(o.Zs=!0,o.jt){var n=X(i.getAllResponseHeaders());try{o.jt(i.status,i.statusText,n)}catch(t){o.qt&&o.qt(t)}}var s=o.Tt;isFinite(r.Wt)&&!isFinite(s.C)&&(s.d(s.N,r.Wt-s.N),o.nr(),o.Ys())}},i.onprogress=function(t){var i=t.loaded-o.tr;o.tr=t.loaded,o.Ct.vt(i),o.Xt&&o.Xt()},i.onerror=function(){o.qt&&o.qt(new TypeError("XHR error"))},i.onload=function(t){var i=t.target,n=new Uint8Array(i.response);o.Ut&&o.Ut(n),o.ir+=n.length,o.ir<o.Tt.T?o.Ys():(o.Ms&&o.Ms(),o.Bs())},n=this.Ct.yt(),s=1024*this.sr(n/1024),h="audio"===r.h?s/2:s,e=this.Tt,isFinite(e.C)&&(e=new w(t,t+h>e.T||e.T-(t+h)<h/2?e.T-t:h)),this.tr=0,i.setRequestHeader("Range",e.Y()),i.send(),this.tr=0)},t.prototype.sr=function(t){var i=this.o.Ni,n=i.length-1,s=0,r=0,h=n;if(t<i[0])return i[0];for(;r<=h;){var e=r+Math.floor((h-r)/2);if(e===n||t>=i[e]&&t<i[e+1]){s=e;break}i[e]<t?r=e+1:h=e-1}return i[s]},t.prototype.nr=function(){var t=this.zn;t&&(t.onreadystatechange=null,t.onprogress=null,t.onerror=null,t.onload=null,t.abort())},t.prototype.qs=function(){return this.xs=!0,this.Bs(),this.nr(),Promise.resolve()},t}(U),C=/^bytes\s(?:(\d+)-(\d+)|\*)\/(\d+)/,z=function(r){function t(t,i){var n,s;r.call(this),this.o=i,this.gt=0,this.zs=Date.now(),this.As=t.As,this.Ts=t.Ts,this.c=t.Ts.slice(-8),this.Fs=t.Fs,this.js=t.js,this.Fi=t.Fi,0!==t.As&&(s=1<(n=t.Fi.split("?")).length?n[1]?"&":"":"?",this.Fi=t.Fi+s+"xyid="+i.f+"&xypr="+t.Ts),this.Xs=new b(this),this.rr=0,this.hr=null,this.er=null}return r&&(t.__proto__=r),((t.prototype=Object.create(r&&r.prototype)).constructor=t).prototype.cs=function(){0===this.gt&&(this.gt=2)},t.prototype.Gs=function(){var t,i,n,s,r,h=this,e=this.o;0!==this.As&&(i=(t=e.Vt.tt(e.Qt))?t.T:e.Qt,(n=Math.floor((i+e.Mi)/e.Mi)*e.Mi)>=e.Wt||0===this.gt&&(this.gt=1,s="bytes="+n+"-"+n,(r=new XMLHttpRequest).onerror=function(){e.qt(h,{type:"preflight",error:"network error",reason:8,target:h.Ts,extra:"range: "+s}),h.vs(8)},r.ontimeout=function(){e.qt(h,{type:"preflight",error:"timeout",reason:9,target:h.Ts,extra:"range: "+s}),h.vs(9)},r.onload=function(){if(206!==r.status&&304!==r.status)return e.qt(h,{type:"preflight",error:"unexpect http status: "+r.status,extra:"range: "+s+", headers: "+r.getAllResponseHeaders(),reason:105,target:h.Ts}),void h.vs(422===r.status?112:105);var t=r.getResponseHeader("content-range"),i=q(t);if(!i||!i.Wt)return e.qt(h,{type:"preflight",error:"get 'content-range' failed",extra:"range: "+s+", status: "+r.status+", headers: "+r.getAllResponseHeaders(),reason:8,target:h.Ts}),void h.vs(106);if(isFinite(e.Wt)){if(e.Wt!==i.Wt)return e.qt(h,{type:"preflight",error:"filesize differ",extra:"cdn: "+e.Wt+", peer: "+i.Wt+", status: "+r.status+", range: "+s+", content-range: "+t,reason:6,target:h.Ts}),void h.vs(6)}else{var n=e.Bt;e.bn(n.N,n.C,i.Wt)}h.gt=2},r.open("GET",this.Fi,!0),r.timeout=e.yi,r.setRequestHeader("Range",s),r.send(),this.hr=r))},t.prototype.or=function(){var t=this.o,i=d.w;if(i){var n=t.Ei[i.c];if(n)return Number(i.l[0])>n}return!!t.Di},t.prototype.Ys=function(t){var i,n,s;2===this.gt&&(i=this.o,n=this.Fi,(s=new(d.M?P:d.O&&d.k&&this.or()?H:L)(i,n,t)).jt=this.jt.bind(this),s.Xt=this.Xt.bind(this),s.Ut=this.Ut.bind(this),s.Ms=this.Ms.bind(this),s.qt=this.qt.bind(this),s.Ys(),this.er=s,this.gt=3,this.Xs.Dt(t.Y()),i.ji=this.Fi,i.Vn=this.Ts)},t.prototype.qs=function(t){void 0===t&&(t=0);var i=this.gt;3!==i&&4!==i||(this.Xs.H=t,this.ur(),this.Bs(),this.gt=2)},t.prototype.vs=function(t){var i;void 0===t&&(t=0),5!==this.gt&&(this.hr&&(this.hr.abort(),this.hr=null),this.Bs(),i=this.o,8!==t&&6!==t&&112!==t&&106!==t||(i.$t[this.Ts]=t),this.Xs.H=t,this.ur(),this.gt=5,0===this.As&&0!==t&&i.ns({status:4203,message:"cdn closed by "+t}))},t.prototype.ur=function(){var t,i,n=this.Xs,s=this.o;0!==n.H&&110!==n.H&&(3!==this.gt&&4!==this.gt||(t="",i="state: "+this.gt+", status: "+n.At+", range: "+n.Tt+", headers: "+JSON.stringify(n.Ft),n.Jt&&(t=n.Jt+"",i="details: "+JSON.stringify(n.Jt)+", "+i),s.qt(this,{type:"pipe abort",error:t,reason:n.H,extra:i,target:this.Ts})))},t.prototype.Bs=function(){var t=this;this.er&&(this.er.qs().then(function(){t.er||t.emit("0",{fr:"2",ar:t})}),this.er=null)},t.prototype.jt=function(t,i,n){if(3===this.gt&&this.er){var s=this.o,r=this.Xs;r.jt(t,n);var h=this.er.Tt,e=h.N;if(t<200||299<t&&304!==t||200===t&&0<e)throw new c(t+" "+i,t);this.rr=e;var o=1/0,u=q(n["content-range"]);if(u){if(e!==u.N)throw new a("receive: "+u.N+", request: "+e);if(o=u.Wt,0!==this.As&&isFinite(s.Wt)&&s.Wt!==u.Wt)return s.qt(this,{type:"response header",error:"filesize differ",extra:"cdn: "+s.Wt+", peer: "+u.Wt+", status: "+t+", range: "+r.Tt+", content-range: "+n["content-range"],reason:6,target:this.Ts}),void this.vs(6)}else{if(0!==this.As)return s.qt(this,{type:"response header",error:"get 'content-range' failed",extra:"status: "+t+", range: "+r.Tt+", content-range: "+n["content-range"],target:this.Ts}),void this.vs(106);if(!isFinite(h.C)){var f=Number(n["content-length"]);if(!(0<f))throw new a("get 'content-length' failed");o=h.N+f}}this.gt=4,0===this.As&&this.emit("0",{Wt:o,fr:"11",ar:this})}},t.prototype.Xt=function(){4===this.gt&&this.er&&this.Xs.Xt()},t.prototype.Ut=function(t){var i;4===this.gt&&this.er&&(i=this.rr,this.rr=i+t.length,this.Xs.Ut(t),this.emit("0",{Jn:t,ir:i,fr:"9",ar:this}))},t.prototype.Ms=function(){var t,i;4===this.gt&&this.er&&(t=this.er.Tt,isFinite(t.C)&&t.T!==this.rr&&(i=this.Xs,this.o.qt(this,{type:"early end",error:"end: "+t.T+", offset: "+this.rr,extra:"status: "+i.At+", range: "+i.Tt+", headers: "+JSON.stringify(i.Ft),target:this.Ts})),this.gt=2,this.er=null,this.emit("0",{fr:"10",ar:this}))},t.prototype.qt=function(t){var i;3!==this.gt&&4!==this.gt||!this.er||(this.Xs.qt(this.o.En(t)),i=0,t instanceof f?i=120:t instanceof c?i=105:t instanceof a?i=106:3===this.gt?i=101:4===this.gt&&(i=100),this.vs(i))},t}(j),G=d.m+"//h5conf-open.xycdn.com/psdk_param";function I(t){var i,n,s=document.createTextNode(""),r=0,h=0;return new t(function(){var t;if(i)n&&(i=n.slice(h).concat(i));else{if(!n)return;i=n}if(n=i,i=null,h=0,"function"==typeof n)return t=n,n=null,void t();for(s.data=r=++r%2;n&&h<n.length;)t=n[h],++h===n.length&&(n=null),t()}).observe(s,{characterData:!0}),function(t){i?"function"==typeof i?i=[i,t]:i.push(t):(i=t,s.data=r=++r%2)}}function B(t){this.o=t,this.Ut=null,this.Ms=null,this.vr=new T(t),this.vr.Hn=this.Hn.bind(this),this.lr=new F(t),this.dr=new N(t),this.an=k.zi(200,this.ln.bind(this)),this.fn=!0,this.wr=!1,this.yr=0,this.mr=new J(t),this.mr.Ds();var i={Ts:"cdn",Fi:t.Fi,As:0};this.gr=new z(i,t),this.gr.on("0",this._r.bind(this)),this.gr.cs()}J.prototype.Ln=function(t){this.o.qt(this,{type:"load config",error:t,extra:"count: "+this.Rs}),this.Rs<this.ks&&(this.Rs+=1,this.an.N())},J.prototype.Cn=function(t){this.o.wn(t)},J.prototype.Ds=function(){if("watch"!==this.o.h){var t=this.zn;try{t.open("GET",this.Ns,!0),t.timeout=8e3,t.send()}catch(t){this.Ln(t.toString())}}},J.prototype.Tn=function(){this.an.Fn(),this.zn.abort(),this.Rs=0};var V=function(){if("function"==typeof queueMicrotask)return function(t){queueMicrotask(t)};if("object"==typeof document&&document){if("function"==typeof MutationObserver)return I(MutationObserver);if("function"==typeof WebKitMutationObserver)return I(WebKitMutationObserver)}return"function"==typeof setImmediate?function(t){setImmediate(t)}:function(t){setTimeout(t,0)}}();function Y(t,i,n){var s=this;this.onDataArrival=null,this.onComplete=null,this.onError=null;var r=this.Or=new W({url:t,media:i,mediaType:n});r.on($.DATA,function(t){var i=t.buffer,n=t.offset;s.onDataArrival&&s.onDataArrival(new Uint8Array(i),n)}),r.on($.END,function(){s.onComplete&&s.onComplete()}),r.on($.ERROR,function(t){s.onError&&s.onError(t.status,t.message)})}B.prototype.Tn=function(){this.Ut=null,this.Ms=null,this.fn=!0,this.wr=!1,this.an.Fn(),this.gr.vs(),this.mr.Tn(),this.lr.Tn(),this.vr.Tn(),this.dr.Tn()},B.prototype.cs=function(t,i){var n=this;this.fn=!1;var s=this.o;if(t<0)return s.qt(this,{type:"forbidden",error:"open failed, invalid argument",extra:"["+t+", "+i+"]"}),void s.ns({status:4203,message:"invalid argument 'position': "+t});s.bn(t,i,s.Wt);var r=s.Bt;s.Qt=r.N,V(function(){return n.xr()}),this.Ys(),this.an.N(),this.vr.N(),this.lr.N()},B.prototype.vs=function(){this.fn=!0,this.wr=!1,this.an.Fn(),this.vr.Fn(),this.lr.Fn(),this.gr.qs()},B.prototype.ln=function(){this.Ys(),this.lr.Is(this.gr)},B.prototype.Mr=function(){var t=this,i=this.o;2!==this.gr.gt&&0!==i.Qt&&(this.wr||!1!==this.lr.Js()&&(i.On(),i.gn()<i.fi||(this.wr=!0,V(function(){t.wr=!1,t.gr.qs()}))))},B.prototype.Ys=function(){var t,i,n,s,r,h;2===this.gr.gt&&(0<(t=this.o).Yt.Lt().length||(t.Bt,(n=(i=t.Vt.tt(t.Qt))?i.T:t.Qt)>=t.Wt||(s="audio"===t.h?t.Oi/2:t.Oi,i&&i.T-t.Qt>s||(r=t.gn(),h=this.lr.Js(),r>t.fi&&h?this.Rr(n):this.kr(n)))))},B.prototype.kr=function(t){var i,n=this.o.Bt;t>=n.T||(i=n.T-t,this.gr.Ys(new w(t,i)))},B.prototype.Rr=function(t){var i,n,s=this.o.Yt.Pt();0!==s.length&&(n=0,s.forEach(function(t){t.zs>n&&(n=(i=t).zs)}),this.Sr(i,t))},B.prototype.Sr=function(t,i){var n,s,r,h,e;2===t.gt&&(s=(n=this.o).Bt,r="audio"===n.h?n.xi/2:n.xi,e=i+(h=Math.round((i+r*n.Mi)/n.Mi)*n.Mi-i)>n.Wt?n.Wt-i:i+h<s.T?s.T-i:h,t.Ys(new w(i,e)))},B.prototype.Hn=function(t){var n=this,s=this.o,r=s.Yt;r.Ht().forEach(function(t){r.remove(t.Ts)}),t.forEach(function(t){var i;r.has(t.Ts)||((i=new z(t,s)).on("0",n._r.bind(n)),r.set(t.Ts,i),t.Ts in s.$t&&i.vs(s.$t[t.Ts]))})},B.prototype.Dr=function(){var i=this.o;try{this.Ms&&this.Ms()}catch(t){throw new f("catch an error when execute onEnd",i.En(t))}},B.prototype.Nr=function(t,i){var n=this.o;try{this.Ut&&this.Ut(t,i)}catch(t){throw new f("catch an error when execute onData",n.En(t))}var s=n.Bt;n.Qt===s.T&&this.Dr()},B.prototype.xr=function(){var t,i,n,s=this.o,r=s.Bt;s.Qt>=r.T||(t=s.Vt.tt(s.Qt))&&(s.Qt=t.T>r.T?r.T:t.T,i=new w(r.N,s.Qt-r.N),(n=this.dr.ms(i))&&this.Nr(n,i.N))},B.prototype._r=function(t){switch(t.fr){case"9":this.Er(t);break;case"10":this.Tr(t);break;case"11":this.Ar(t);break;case"2":this.Fr(t)}},B.prototype.Ar=function(t){var i=this.o,n=i.Bt;i.bn(n.N,n.C,t.Wt),this.lr.Ps()},B.prototype.Er=function(t){var i,n=this.o,s=n.Bt,r=new w(t.ir,t.Jn.length),h=t.ar;n.Ct.vt(r.C),0===h.As?(n.Zt+=r.C,i=this.jr(),n.dn[i]+=r.C):1===h.As&&(n.ti+=r.C),this.dr.bs(t.Jn,r),0===h.As&&s.C>n.bi&&this.Mr();var e,o,u=s.Q(r);u&&(n.Qt=u.T,e=n.Qt-u.N,(o=new Uint8Array(e)).set(t.Jn.subarray(u.N-r.N,n.Qt-r.N)),this.Nr(o,r.N))},B.prototype.Tr=function(t){var i,n=this,s=this.o,r=s.Bt,h=t.ar;isFinite(r.C)?this.xr():(s.bn(r.N,r.C,s.Qt),i=h.Xs,s.qt(this,{type:"unknown filesize util end",error:"reserveRg: "+r,extra:"status: "+i.At+", range: "+i.Tt+", headers: "+JSON.stringify(i.Ft),target:h.Ts}),this.Dr()),V(function(){return n.Ys()})},B.prototype.Fr=function(t){var i,n=this;this.fn||(i=t.ar,V(function(){return n.Ys()}),0!==i.As&&(this.yr=i.Xs.H))},B.prototype.jr=function(){var t=this.o;return t.gn()<=t.fi&&108!==this.yr&&109!==this.yr?"cr202":0===t.Yt.size()?"cr203":0!==this.yr?"cr"+this.yr:!1===this.lr.Js()?"cr204":"cr0"};var $={DATA:"data",END:"end",ERROR:"error"},W=function(h){function t(t){var n=this;if(h.call(this),this.Xr=0,this.readyState=0,!t)throw new u("XYVOD constructor, expect options");if(!t.url)throw new u("XYVOD constructor, expect options.url");if(!t.media&&!t.video&&!t.audio)throw new u("XYVOD constructor, expect options.mediaElement");var i=this.o=new R(t);i.ns=function(t){n.emit($.ERROR,t),n.dispose()};var s=this.Ur=new D(i);"watch"===i.h&&s.cs();var r=this.qr=new B(i);r.Ut=function(t,i){n.emit($.DATA,{buffer:t.buffer,offset:i})},r.Ms=function(){n.readyState=0,n.emit($.END)}}h&&(t.__proto__=h);var i={info:{configurable:!0}};return((t.prototype=Object.create(h&&h.prototype)).constructor=t).isSupported=function(){return d._&&d.R&&d.x},t.version=function(){return d.a},t.prototype.options=function(t){t&&(this.o.Ai=!!t.withCredentials)},i.info.get=function(){var t=this.o;return{cdnBytes:t.Zt,p2pBytes:t.ti,currentUrl:t.ji}},t.prototype.cs=function(t,i){this.readyState=1,this.o.It=Date.now(),this.Ur.cs(),this.qr.cs(t,i),this.N=t,this.C=i},t.prototype.open=function(t,i){var n,s,r,h=this;void 0===i&&(i=-1),2!==this.readyState&&(n=Date.now(),s=this.o,r=-1<i-t?i-t+1:0,this.N===t&&this.C===r?(s.qt(this,{type:"repeat open call",error:"readyState: "+this.readyState,extra:"count: "+this.Xr+", duration: "+(n-s.It)+", start: "+t+", end: "+i}),0===this.readyState?(this.Xr+=1,this.Xr>s.Si?s.ns({status:4203,message:"repeat open call"}):this.cs(t,r)):this.cs(t,r)):0===this.readyState?this.cs(t,r):(this.close(),setTimeout(function(){return h.cs(t,r)},0)))},t.prototype.close=function(){2!==this.readyState&&(this.readyState=0,this.Xr=0,this.Ur.vs(),this.qr.vs())},t.prototype.dispose=function(){this.readyState=2,this.off(),this.qr.Tn(),this.Ur.Tn(),this.o.Tn()},Object.defineProperties(t.prototype,i),t}(j);Y.prototype.load=function(t,i){this.Or.options({withCredentials:i}),this.Or.open(t.from,t.to)},Y.prototype.abort=function(){1===this.Or.readyState&&this.Or.close()},Y.prototype.destroy=function(){this.onDataArrival=null,this.onComplete=null,this.onError=null,2!==this.Or.readyState&&this.Or.dispose()},Y.prototype.loadInfo=function(){var t=this.Or.info;return{cdn:t.cdnBytes,p2p:t.p2pBytes,url:t.currentUrl}},W.isSupported()&&(window.xyvp={Loader:Y,XYVOD:W,XYVODEvent:$})}();